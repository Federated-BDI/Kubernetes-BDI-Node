# Common default values are present here. 
# Edit as required, and you may find the other possible values in the templates.

# Corda-Node Configuration 
corda-node:
  # Azure LoadBalancer usage configuration
  annotations:
    # service.beta.kubernetes.io/azure-load-balancer-resource-group: $AZURE_RESOURCE_GROUP # Replace with the resource group of the Azure Kubernetes cluster
 
  service:
    type: LoadBalancer
    loadBalancerIP: 127.0.0.1 # Replace with pre-instantiated Azure Public IP Address
    p2pPort: 10005
    rpcPort: 10006

  # Comment the following 4 lines if GraphDB will not be enabled in the following configuration!
  graphdb:
    enabled: true # Enable if enabled below.
    host: $HELM_DEPLOYMENT_NAME-graphdb
    port: 7200 # Use port defined below.
    privateRepository: private
    repository: federated-shacl

  image: tystnad/corda-zulu-java1.8-4.5.8:latest # Contains 0 contracts.
  # Contracts are currently pulled from the public Docker-BDI-Node repository, and mounted at 
  # /opt/corda/cordapps/. This may be made customizable in a subsequent release.
  # (See template for details)

  # Node configuration. Replace the IP address (127.0.0.1) for P2P with the pre-instantiated Azure Public IP Address.
  # Also, update nodeConf as required with the appropriate values.
  nodeConf: |-
    devMode=true
    myLegalName="O=TNO,L=Manila,C=ML,OU=ICT"
    p2pAddress="127.0.0.1:10005"
    rpcSettings {
        address="0.0.0.0:10006"
        adminAddress="0.0.0.0:10046"
    }
    security {
        authService {
            dataSource {
                type=INMEMORY
                users=[
                    {
                        password=vzzuABeCut3jGoJfEp94
                        permissions=[
                            ALL
                        ]
                        user=user1
                    }
                ]
            }
        }
    }
    devModeOptions.allowCompatibilityZone=true
    compatibilityZoneURL="https://nms.k8s.basicdatasharinginfrastructure.net"
  secrets:
    create: true
    name: corda-secrets
    networkTrustStore:
      base64: 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

# Corda Client API Configuration
corda-client-api:
  # Whether or not the accompanying Spring Boot client API instance is deployed
  enabled: true

  # Service type and port set for the Spring Boot API.
  service:
    type: ClusterIP
    port: 10050
  
  # Image values
  image:
    name: tystnad/corda-client-springboot:0.1.8 # Default image used for applications (change for development)
    pullPolicy: Always

  # Configuration parameters
  # Replace the $HELM_DEPLOYMENT_NAME with the values you used for the deployment
  client:
    tradelens:
      apikey: "test"
      orgId: "test"
    semanticadapter:
      protocol: http
      host: $HELM_DEPLOYMENT_NAME-semantic-adapter
      port: 1337
      path: tradelens # Fixed endpoint
    graphdb:
      host: $HELM_DEPLOYMENT_NAME-graphdb
      port: 7200
      privateRepository: private
      repository: federated-shacl


  # Enable ingress on the image (default parameters, see template for details)
  ingress:
    enabled: true
    # Replace with hostname you wish to use (see template for details). 
    # TLS is automatically added, if LetsEncrypt ClusterIssuer is configured for the cluster.
    host: $HOSTNAME


  # Configuration used for the server.
  configmap:
    # Server Port (Use same as above!)
    server:
      port: 10050
    
    # Access information for the Corda Node (Use same as in the Corda configuration above!)
    config:
      rpc:
        host: $HELM_DEPLOYMENT_NAME-corda-node # Replace with the same name used for the deployment.
        port: 10006
        username: user1
        password: vzzuABeCut3jGoJfEp94


# Supporting GraphDB configuration
graphdb:
  # Whether an accompanying GraphDB instance is deployed.
  enabled: true

  # Service type and port set for the GraphDB instance.
  service:
    type: ClusterIP
    port: 7200

  # Custom resources in Kubernetes may be defined here. See templates for more details. 
  resources: {}


# Supporting GraphDB configuration
semantic-adapter:
  enabled: true

  # Image names
  image:
    name: tystnad/semantic-adapter:tl-0.4
    pullPolicy: IfNotPresent

  # Service type and port set for the semantic adapter instance.
  service:
    type: ClusterIP
    port: 1337

  # Custom resources in Kubernetes may be defined here. See templates for more details.
  resources: {}
